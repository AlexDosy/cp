class ListNode:
    def __init__(self, val=0, next=None):
        self.val = val
        self.next = next

def partition(head: ListNode, x: int) -> ListNode:
    less_dummy = ListNode(0)
    greater_dummy = ListNode(0)

    less = less_dummy
    greater = greater_dummy
    current = head

    while current:
        if current.val < x:
            less.next = current
            less = less.next
        else:
            greater.next = current
            greater = greater.next
        current = current.next

    # Important: terminate the greater list
    greater.next = None
    # Connect the two partitions
    less.next = greater_dummy.next

    return less_dummy.next



Use two dummy lists:

one for nodes < x

one for nodes >= x

Traverse the original list once, append each node to the appropriate list, then connect the two lists.

This keeps the original order within each partition and runs in O(n) time with O(1) extra space (just pointers).